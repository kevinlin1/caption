<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Live Caption</title>
  <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>âœ¨</text></svg>">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
  </style>
</head>
<body>
  <script>
    const div = document.createElement('div');
    div.style.alignItems = 'flex-end';
    div.style.backgroundColor = 'black';
    div.style.top = '0';
    div.style.color = 'white';
    div.style.display = 'none';
    div.style.fontFamily = 'Google Sans';
    div.style.fontSize = '3vh';
    div.style.lineHeight = '3.5vh';
    div.style.maxHeight = '7vh';
    div.style.overflow = 'hidden';
    div.style.padding = '0.5vh 0.75vh';
    div.style.position = 'fixed';
    div.style.textAlign = 'start';
    div.style.zIndex = '10000';
  
    const recognition = new webkitSpeechRecognition();
    recognition.continuous = true;
    recognition.interimResults = true;
  
    recognition.onresult = event => {
      div.style.display = 'flex';
      let transcript = '';
      for (let i = 0; i < event.results.length; i += 1) {
        transcript += event.results[i][0].transcript;
      }
      div.textContent = transcript;
    };
    recognition.onend = event => recognition.start();
  
    div.onclick = event => {
      recognition.onend = event => {};
      recognition.abort();
      div.remove();
    };
  
    document.body.appendChild(div);
    recognition.start();
  </script>
</body>
</html>
